package work;

class Employee {

	private String name;
	private Task currentTask;
	private int hoursLeft;
	private AllWork allwork;
	
	
	Employee(String name){
		if(name.length()>0){
			setName(name);
		}
	}

	String getName() {
		return name;
	}

	void startWorkingDay(){
		this.hoursLeft=8;
	}
	
	AllWork getAllwork() {
		return allwork;
	}

	void setAllwork(AllWork allwork) {
		this.allwork = allwork;
	}

	private void setName(String name) {
		if (name.length()>0){
			this.name = name;
		}
	}

	Task getCurrentTask() {
		return currentTask;
	}

	void setCurrentTask(Task currentTask) {
		this.currentTask = currentTask;
	}

	private int getHoursLeft() {
		return hoursLeft;
	}

	void setHoursLeft(int hoursLeft) {
		if(hoursLeft>=0&&hoursLeft<=24){
			this.hoursLeft = hoursLeft;
		}
	}
	
	void work(){
		System.out.println("Employee "+getName()+" starts to work");
		if(currentTask==null){
			currentTask=allwork.getNextTask();
			System.out.println("Employee "+getName()+" gets task "+currentTask.getName());
		}
		while (getHoursLeft()>0&&allwork.currentUnassignedTask<allwork.tasks.length){
			if (getHoursLeft()>=currentTask.getWorkingHours()){
				setHoursLeft(getHoursLeft()-currentTask.getWorkingHours());
				currentTask.setWorkingHours(0);
				System.out.println("Task "+currentTask.getName()+" is done");
				setCurrentTask(allwork.getNextTask());
				System.out.println("Employee "+getName()+" gets task "+currentTask.getName());
			}
			else{
				currentTask.setWorkingHours(currentTask.getWorkingHours()-getHoursLeft());
				setHoursLeft(0);
				System.out.println("Employee "+getName()+" finished for today");
			}
			if (allwork.isAllWorkDone()){
				System.out.println("No more tasks");
				return;
			}
		}
	}
	void showReport(){
		System.out.println("Employee name: "+getName());
		System.out.println("Working hours left: "+getHoursLeft());
		currentTask.printInfo();
		System.out.println("-----------");
	}
}
